<div class="container" id="contenido">
    <div class="row">
        <div class="col m12 l10 offset-l1 xl8 offset-xl2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title white-text">Crear Recibo Electr&oacute;nico</span>
                    <p class="z-depth-2 teal lighten-4 black-text center">{{$parent.control+" "+$parent.nombre}}</p>
                    <div>
                        <div class="white-text left">
                            <i class="material-icons">account_balance_wallet</i>Folio:
                            <span class="z-depth-2 teal lighten-4 black-text center">&nbsp;{{newRecibo.id_recibo}}&nbsp;</span>
                        </div>
                        <div class="white-text right">
                            <i class="material-icons">date_range</i>Fecha:
                            <span class="z-depth-2 teal lighten-4 black-text center">&nbsp;{{newRecibo.fecha}}&nbsp;</span>
                        </div>
                    </div>
                    <div>
                        <p class="center-align">VOUCHERS</p>
                        <table class="highlight blue-grey darken-3 z-depth-1">
                            <thead>
                                <tr>
                                    <th>Folio</th>
                                    <th>Fecha</th>
                                    <th>Monto</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="voucher in newRecibo.vouchers">
                                    <td>{{voucher.referencia}}</td>
                                    <td>{{voucher.fecha}}</td>
                                    <td>{{voucher.monto}}</td>
                                    <td>
                                        <i class="material-icons red-text" ng-click="eliminarVoucher(voucher)">cancel</i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn-floating waves-effect waves-light right pulse" ng-click="agregarVoucher()"><i
                                class="material-icons">add</i></button>
                        <div class="white-text right-align">
                            Monto disponible:
                            <span class="z-depth-2 teal lighten-4 black-text center-align">&nbsp;{{newRecibo.montoVouchers
                                | currency}}&nbsp;</span>
                            &nbsp;&nbsp;
                        </div>
                        <br>
                    </div>
                    <hr>
                    <p class="center-align">CONCEPTOS</p>
                    <table class="highlight blue-grey darken-3">
                        <thead>
                            <tr>
                                <th>Clave</th>
                                <th>Concepto</th>
                                <th>Monto</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="concepto in newRecibo.conceptos" style="font-size: small">
                                <td>{{concepto.clave}}</td>
                                <td>{{concepto.concepto}}</td>
                                <td ng-if="concepto.status!='V'">
                                    {{concepto.importe | currency}}
                                </td>
                                <td ng-if="concepto.status=='V'">
                                        <input type="text" ng-blur="sumatorias()" onfocus="this.select();" ng-model="concepto.importe" class="black white-text">
                                </td>
                                <td ng-if="concepto.status!='M'">
                                </td>
                                <td ng-if="concepto.status=='M'">
                                    <div class="input-field">
                                        <input type="text" ng-model="concepto.obs" ng-click="autollenarmateria()" id="autocomplete-input"
                                            class="autocomplete black white-text truncate" name="materias">
                                        <label for="autocomplete-input">Materia</label>
                                    </div>
                                </td>
                                <td><i class="material-icons red-text" ng-click="eliminarConcepto(concepto)">cancel</i></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn-floating waves-effect waves-light right pulse" ng-click="agregarConcepto()"><i
                            class="material-icons">add</i></button>
                    <div class="white-text right-align">
                        Monto total:
                        <span class="z-depth-2 teal lighten-4 black-text center-align">&nbsp;{{newRecibo.montoRecibo |
                            currency}}&nbsp;</span>
                        &nbsp;
                    </div>
                </div>

                <div class="card-action right-align">
                    <button class="btn waves-effect waves-light" type="button" name="cancelar" id="cancelar" ng-click="cancelar()">Cancelar
                        <i class="material-icons right">cancel</i>
                    </button>
                    <button class="btn waves-effect waves-light" type="button" name="guardar" id="guardar" ng-click="guardar()">Guardar
                        <i class="material-icons right">save</i>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <div id="selVoucher" class="modal">
        <div class="modal-content">
            <h4>Selecciona voucher</h4>
            <div class="input-field">
                <input id="search" type="search" required ng-change="filtraVoucherValidos()" ng-model="filtroVouVal">
                <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                <i class="material-icons" ng-click="filtroVouVal=''">close</i>
            </div>
            <table id="vouchersValidos" class="highlight blue-grey darken-3 z-depth-1 white-text">
                <thead>

                    <tr>
                        <th>Fecha</th>
                        <th>Folio</th>
                        <th>Monto</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="vouval in vouchersValidos">
                        <td>{{vouval.fecha | date : 'dd/MMM/yyyy'}}</td>
                        <td>{{vouval.referencia}}</td>
                        <td>{{vouval.monto | currency}}</td>
                        <td>
                            <label>
                                <input type="checkbox" ng-model="vouval.checked" />
                                <span></span>
                            </label>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="modal-close waves-effect waves-green btn">Cancelar</button>
            <button class="modal-close waves-effect waves-green btn" ng-click="ejecutaAgregaVoucher()">Agregar</button>
        </div>
    </div>

    <div id="selConcepto" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4>Selecciona concepto</h4>
            <div class="input-field">
                <input id="search" type="search" required ng-change="filtraConceptos()" ng-model="filtroCon">
                <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                <i class="material-icons" ng-click="filtroCon=''">close</i>
            </div>
            <table id="vouchersValidos" class="highlight blue-grey darken-3 z-depth-1 white-text">
                <thead>

                    <tr>
                        <th>Clave</th>
                        <th>Concepto</th>
                        <th>Monto</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-click="conval.checked=!conval.checked" ng-repeat="conval in conceptosBD">
                        <td>{{conval.clave}}</td>
                        <td>{{conval.concepto}}</td>
                        <td>{{conval.importe | currency}}</td>
                        <td>
                            <label>
                                <input type="checkbox" ng-model="conval.checked" ng-click="conval.checked=!conval.checked" />
                                <span></span>
                            </label>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="modal-close waves-effect waves-green btn">Cancelar</button>
            <button class="modal-close waves-effect waves-green btn" ng-click="ejecutaAgregaConcepto()">Agregar</button>
        </div>
    </div>


    <div id="modalGuardaRecibo" class="modal">
        <div class="modal-content">
            <h4>Guardar</h4>
            <p>Â¿Esta seguro que desea generar el recibo?</p>
        </div>
        <div class="modal-footer">
            <button class="modal-close waves-effect waves-green btn">Cancelar</button>
            <button class="modal-close waves-effect waves-green btn" ng-click="ejecutaGuardar()">Guardar</button>
        </div>
    </div>

    <div id="readerror">

    </div>
</div>
<script>
    $(document).ready(function () {
        $('#selVoucher').modal();
        $('#selConcepto').modal();
        $('#modalGuardaRecibo').modal();

        $('input.autocomplete').autocomplete({
            data: {
                "Arizona (1)": null,
                "Florida (2)": null,
                "Georgia (3)": null,
                "Hawaii(4)": null,
                "Idaho (5)": null,
                "Illinois (6)": null
            }
        });
    });

</script>